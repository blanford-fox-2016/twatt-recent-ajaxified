var OAuth = require('oauth')
var auth = require('../config/config')
var Twit = require('twit')

var oauth = new OAuth.OAuth(
    'https://api.twitter.com/oauth/request_token',
    'https://api.twitter.com/oauth/access_token',
    auth.twitterAuth.consumerKey,
    auth.twitterAuth.consumerSecret,
    '1.0A',
    null,
    'HMAC-SHA1'
);

var test = function (url, cb) {
    oauth.get(
        url,
        auth.twitterAuth.accessToken, // test user token
        auth.twitterAuth.accessTokenSecret, // test user secret
        function (e, data, res) {
            if (e)
                console.error(e);
            cb(data)
        });

}

var T = new Twit({
    consumer_key: auth.twitterAuth.consumerKey,
    consumer_secret: auth.twitterAuth.consumerSecret,
    access_token: auth.twitterAuth.accessToken,
    access_token_secret: auth.twitterAuth.accessTokenSecret,
})

module.exports = {
    //API

    getHomeAPI: function (req, res) {
        // var url = 'https://api.twitter.com/1.1/search/tweets.json?q=' + req.query.q
        var url = 'https://api.twitter.com/1.1/statuses/home_timeline.json?count=5'
        test(url, function (data) {
            res.json(JSON.parse(data))
        })
        // res.json([{"created_at":"Mon Oct 31 10:49:16 +0000 2016","id":793042145703637000,"id_str":"793042145703636993","text":"Saatnya Adzan Magrib untuk wilayah DKI Jakarta dan sekitarnya. https://t.co/ibN5Yvtx5r","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[],"media":[{"id":793042023804653600,"id_str":"793042023804653568","indices":[63,86],"media_url":"http://pbs.twimg.com/media/CwFzhNjVUAAPgBG.jpg","media_url_https":"https://pbs.twimg.com/media/CwFzhNjVUAAPgBG.jpg","url":"https://t.co/ibN5Yvtx5r","display_url":"pic.twitter.com/ibN5Yvtx5r","expanded_url":"https://twitter.com/RadioElshinta/status/793042145703636993/photo/1","type":"photo","sizes":{"small":{"w":680,"h":680,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"medium":{"w":1181,"h":1181,"resize":"fit"},"large":{"w":1181,"h":1181,"resize":"fit"}}}]},"extended_entities":{"media":[{"id":793042023804653600,"id_str":"793042023804653568","indices":[63,86],"media_url":"http://pbs.twimg.com/media/CwFzhNjVUAAPgBG.jpg","media_url_https":"https://pbs.twimg.com/media/CwFzhNjVUAAPgBG.jpg","url":"https://t.co/ibN5Yvtx5r","display_url":"pic.twitter.com/ibN5Yvtx5r","expanded_url":"https://twitter.com/RadioElshinta/status/793042145703636993/photo/1","type":"photo","sizes":{"small":{"w":680,"h":680,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"medium":{"w":1181,"h":1181,"resize":"fit"},"large":{"w":1181,"h":1181,"resize":"fit"}}}]},"source":"<a href=\"https://about.twitter.com/products/tweetdeck\" rel=\"nofollow\">TweetDeck</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":121640063,"id_str":"121640063","name":"Radio Elshinta","screen_name":"RadioElshinta","location":"ÜT: -6.187385,106.733011","description":"Official twitter of Radio Elshinta  |  Phone: 021-5869000  |  SMS: 081-180-6543  |  Email: redaksi@elshinta.com  |  Wanna buzz? Email us: buzz@elshinta.com","url":"http://t.co/in2mL8c87g","entities":{"url":{"urls":[{"url":"http://t.co/in2mL8c87g","expanded_url":"http://www.elshinta.com","display_url":"elshinta.com","indices":[0,22]}]},"description":{"urls":[]}},"protected":false,"followers_count":2242598,"friends_count":3,"listed_count":3700,"created_at":"Wed Mar 10 03:52:46 +0000 2010","favourites_count":365,"utc_offset":25200,"time_zone":"Jakarta","geo_enabled":false,"verified":true,"statuses_count":703417,"lang":"en","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"0099B9","profile_background_image_url":"http://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_image_url_https":"https://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/121640063/1477623055","profile_link_color":"46D0EB","profile_sidebar_border_color":"FFFFFF","profile_sidebar_fill_color":"2D86D4","profile_text_color":"0C0417","profile_use_background_image":false,"has_extended_profile":false,"default_profile":false,"default_profile_image":false,"following":true,"follow_request_sent":false,"notifications":false,"translator_type":"none"},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":0,"favorite_count":0,"favorited":false,"retweeted":false,"possibly_sensitive":false,"possibly_sensitive_appealable":false,"lang":"in"},{"created_at":"Mon Oct 31 10:48:24 +0000 2016","id":793041926853242900,"id_str":"793041926853242880","text":"UNICEF: 2 Miliar Anak Hirup Udara Beracun - @UNICEF https://t.co/kdRxDeDaNe … https://t.co/WiXsSIHMrq","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[{"screen_name":"UNICEF","name":"UNICEF","id":33933259,"id_str":"33933259","indices":[44,51]}],"urls":[{"url":"https://t.co/kdRxDeDaNe","expanded_url":"http://elshinta.com/news/85446/2016/10/31/unicef-2-miliar-anak-hirup-udara-beracun","display_url":"elshinta.com/news/85446/201…","indices":[52,75]}],"media":[{"id":793026351733157900,"id_str":"793026351733157888","indices":[78,101],"media_url":"http://pbs.twimg.com/media/CwFlQ-iUMAAtcWw.jpg","media_url_https":"https://pbs.twimg.com/media/CwFlQ-iUMAAtcWw.jpg","url":"https://t.co/WiXsSIHMrq","display_url":"pic.twitter.com/WiXsSIHMrq","expanded_url":"https://twitter.com/ElshintaDotCom/status/793026357269716992/photo/1","type":"photo","sizes":{"medium":{"w":800,"h":450,"resize":"fit"},"small":{"w":680,"h":383,"resize":"fit"},"large":{"w":800,"h":450,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"}},"source_status_id":793026357269717000,"source_status_id_str":"793026357269716992","source_user_id":205287653,"source_user_id_str":"205287653"}]},"extended_entities":{"media":[{"id":793026351733157900,"id_str":"793026351733157888","indices":[78,101],"media_url":"http://pbs.twimg.com/media/CwFlQ-iUMAAtcWw.jpg","media_url_https":"https://pbs.twimg.com/media/CwFlQ-iUMAAtcWw.jpg","url":"https://t.co/WiXsSIHMrq","display_url":"pic.twitter.com/WiXsSIHMrq","expanded_url":"https://twitter.com/ElshintaDotCom/status/793026357269716992/photo/1","type":"photo","sizes":{"medium":{"w":800,"h":450,"resize":"fit"},"small":{"w":680,"h":383,"resize":"fit"},"large":{"w":800,"h":450,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"}},"source_status_id":793026357269717000,"source_status_id_str":"793026357269716992","source_user_id":205287653,"source_user_id_str":"205287653"}]},"source":"<a href=\"https://about.twitter.com/products/tweetdeck\" rel=\"nofollow\">TweetDeck</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":121640063,"id_str":"121640063","name":"Radio Elshinta","screen_name":"RadioElshinta","location":"ÜT: -6.187385,106.733011","description":"Official twitter of Radio Elshinta  |  Phone: 021-5869000  |  SMS: 081-180-6543  |  Email: redaksi@elshinta.com  |  Wanna buzz? Email us: buzz@elshinta.com","url":"http://t.co/in2mL8c87g","entities":{"url":{"urls":[{"url":"http://t.co/in2mL8c87g","expanded_url":"http://www.elshinta.com","display_url":"elshinta.com","indices":[0,22]}]},"description":{"urls":[]}},"protected":false,"followers_count":2242598,"friends_count":3,"listed_count":3700,"created_at":"Wed Mar 10 03:52:46 +0000 2010","favourites_count":365,"utc_offset":25200,"time_zone":"Jakarta","geo_enabled":false,"verified":true,"statuses_count":703417,"lang":"en","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"0099B9","profile_background_image_url":"http://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_image_url_https":"https://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/121640063/1477623055","profile_link_color":"46D0EB","profile_sidebar_border_color":"FFFFFF","profile_sidebar_fill_color":"2D86D4","profile_text_color":"0C0417","profile_use_background_image":false,"has_extended_profile":false,"default_profile":false,"default_profile_image":false,"following":true,"follow_request_sent":false,"notifications":false,"translator_type":"none"},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":0,"favorite_count":0,"favorited":false,"retweeted":false,"possibly_sensitive":false,"possibly_sensitive_appealable":false,"lang":"in"},{"created_at":"Mon Oct 31 10:45:14 +0000 2016","id":793041131533578200,"id_str":"793041131533578240","text":"RT @babay03258344: @RadioElshinta akibat hujan deras banjir 40 cm diperumahan kayu gede paku jaya serpong utara tangsel https://t.co/poDnIk…","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[{"screen_name":"babay03258344","name":"babay","id":1546253856,"id_str":"1546253856","indices":[3,17]},{"screen_name":"RadioElshinta","name":"Radio Elshinta","id":121640063,"id_str":"121640063","indices":[19,33]}],"urls":[]},"source":"<a href=\"https://about.twitter.com/products/tweetdeck\" rel=\"nofollow\">TweetDeck</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":121640063,"id_str":"121640063","name":"Radio Elshinta","screen_name":"RadioElshinta","location":"ÜT: -6.187385,106.733011","description":"Official twitter of Radio Elshinta  |  Phone: 021-5869000  |  SMS: 081-180-6543  |  Email: redaksi@elshinta.com  |  Wanna buzz? Email us: buzz@elshinta.com","url":"http://t.co/in2mL8c87g","entities":{"url":{"urls":[{"url":"http://t.co/in2mL8c87g","expanded_url":"http://www.elshinta.com","display_url":"elshinta.com","indices":[0,22]}]},"description":{"urls":[]}},"protected":false,"followers_count":2242598,"friends_count":3,"listed_count":3700,"created_at":"Wed Mar 10 03:52:46 +0000 2010","favourites_count":365,"utc_offset":25200,"time_zone":"Jakarta","geo_enabled":false,"verified":true,"statuses_count":703417,"lang":"en","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"0099B9","profile_background_image_url":"http://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_image_url_https":"https://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/121640063/1477623055","profile_link_color":"46D0EB","profile_sidebar_border_color":"FFFFFF","profile_sidebar_fill_color":"2D86D4","profile_text_color":"0C0417","profile_use_background_image":false,"has_extended_profile":false,"default_profile":false,"default_profile_image":false,"following":true,"follow_request_sent":false,"notifications":false,"translator_type":"none"},"geo":null,"coordinates":null,"place":null,"contributors":null,"retweeted_status":{"created_at":"Mon Oct 31 10:44:14 +0000 2016","id":793040879011373000,"id_str":"793040879011373056","text":"@RadioElshinta akibat hujan deras banjir 40 cm diperumahan kayu gede paku jaya serpong utara tangsel https://t.co/poDnIkzeZB","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[{"screen_name":"RadioElshinta","name":"Radio Elshinta","id":121640063,"id_str":"121640063","indices":[0,14]}],"urls":[],"media":[{"id":793040876473909200,"id_str":"793040876473909248","indices":[101,124],"media_url":"http://pbs.twimg.com/media/CwFyebaXgAA5XyN.jpg","media_url_https":"https://pbs.twimg.com/media/CwFyebaXgAA5XyN.jpg","url":"https://t.co/poDnIkzeZB","display_url":"pic.twitter.com/poDnIkzeZB","expanded_url":"https://twitter.com/babay03258344/status/793040879011373056/photo/1","type":"photo","sizes":{"medium":{"w":640,"h":480,"resize":"fit"},"small":{"w":640,"h":480,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"large":{"w":640,"h":480,"resize":"fit"}}}]},"extended_entities":{"media":[{"id":793040876473909200,"id_str":"793040876473909248","indices":[101,124],"media_url":"http://pbs.twimg.com/media/CwFyebaXgAA5XyN.jpg","media_url_https":"https://pbs.twimg.com/media/CwFyebaXgAA5XyN.jpg","url":"https://t.co/poDnIkzeZB","display_url":"pic.twitter.com/poDnIkzeZB","expanded_url":"https://twitter.com/babay03258344/status/793040879011373056/photo/1","type":"photo","sizes":{"medium":{"w":640,"h":480,"resize":"fit"},"small":{"w":640,"h":480,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"large":{"w":640,"h":480,"resize":"fit"}}}]},"source":"<a href=\"http://blackberry.com/twitter\" rel=\"nofollow\">Twitter for BlackBerry®</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":121640063,"in_reply_to_user_id_str":"121640063","in_reply_to_screen_name":"RadioElshinta","user":{"id":1546253856,"id_str":"1546253856","name":"babay","screen_name":"babay03258344","location":"","description":"","url":null,"entities":{"description":{"urls":[]}},"protected":false,"followers_count":44,"friends_count":63,"listed_count":0,"created_at":"Tue Jun 25 17:40:34 +0000 2013","favourites_count":24,"utc_offset":25200,"time_zone":"Jakarta","geo_enabled":true,"verified":false,"statuses_count":495,"lang":"en","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"C0DEED","profile_background_image_url":"http://abs.twimg.com/images/themes/theme1/bg.png","profile_background_image_url_https":"https://abs.twimg.com/images/themes/theme1/bg.png","profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/721616912866627584/D_VeNBa7_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/721616912866627584/D_VeNBa7_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/1546253856/1464374816","profile_link_color":"0084B4","profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":true,"has_extended_profile":false,"default_profile":true,"default_profile_image":false,"following":false,"follow_request_sent":false,"notifications":false,"translator_type":"none"},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":1,"favorite_count":1,"favorited":false,"retweeted":false,"possibly_sensitive":true,"possibly_sensitive_appealable":false,"lang":"in"},"is_quote_status":false,"retweet_count":1,"favorite_count":0,"favorited":false,"retweeted":false,"lang":"in"},{"created_at":"Mon Oct 31 10:45:04 +0000 2016","id":793041088336375800,"id_str":"793041088336375808","text":"17.44: RT @untungblora3: Ruas tol arah Bandara Soetta ramai lancar. https://t.co/WWK3yPAqaG","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[{"screen_name":"untungblora3","name":"Chah Zchoeax","id":2650804214,"id_str":"2650804214","indices":[10,23]}],"urls":[],"media":[{"id":793041046946984000,"id_str":"793041046946983936","indices":[68,91],"media_url":"http://pbs.twimg.com/media/CwFyoWeUMAAY0Dw.jpg","media_url_https":"https://pbs.twimg.com/media/CwFyoWeUMAAY0Dw.jpg","url":"https://t.co/WWK3yPAqaG","display_url":"pic.twitter.com/WWK3yPAqaG","expanded_url":"https://twitter.com/RadioElshinta/status/793041088336375808/photo/1","type":"photo","sizes":{"large":{"w":900,"h":1200,"resize":"fit"},"medium":{"w":900,"h":1200,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"small":{"w":510,"h":680,"resize":"fit"}}}]},"extended_entities":{"media":[{"id":793041046946984000,"id_str":"793041046946983936","indices":[68,91],"media_url":"http://pbs.twimg.com/media/CwFyoWeUMAAY0Dw.jpg","media_url_https":"https://pbs.twimg.com/media/CwFyoWeUMAAY0Dw.jpg","url":"https://t.co/WWK3yPAqaG","display_url":"pic.twitter.com/WWK3yPAqaG","expanded_url":"https://twitter.com/RadioElshinta/status/793041088336375808/photo/1","type":"photo","sizes":{"large":{"w":900,"h":1200,"resize":"fit"},"medium":{"w":900,"h":1200,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"small":{"w":510,"h":680,"resize":"fit"}}}]},"source":"<a href=\"https://about.twitter.com/products/tweetdeck\" rel=\"nofollow\">TweetDeck</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":121640063,"id_str":"121640063","name":"Radio Elshinta","screen_name":"RadioElshinta","location":"ÜT: -6.187385,106.733011","description":"Official twitter of Radio Elshinta  |  Phone: 021-5869000  |  SMS: 081-180-6543  |  Email: redaksi@elshinta.com  |  Wanna buzz? Email us: buzz@elshinta.com","url":"http://t.co/in2mL8c87g","entities":{"url":{"urls":[{"url":"http://t.co/in2mL8c87g","expanded_url":"http://www.elshinta.com","display_url":"elshinta.com","indices":[0,22]}]},"description":{"urls":[]}},"protected":false,"followers_count":2242598,"friends_count":3,"listed_count":3700,"created_at":"Wed Mar 10 03:52:46 +0000 2010","favourites_count":365,"utc_offset":25200,"time_zone":"Jakarta","geo_enabled":false,"verified":true,"statuses_count":703417,"lang":"en","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"0099B9","profile_background_image_url":"http://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_image_url_https":"https://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/121640063/1477623055","profile_link_color":"46D0EB","profile_sidebar_border_color":"FFFFFF","profile_sidebar_fill_color":"2D86D4","profile_text_color":"0C0417","profile_use_background_image":false,"has_extended_profile":false,"default_profile":false,"default_profile_image":false,"following":true,"follow_request_sent":false,"notifications":false,"translator_type":"none"},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":0,"favorite_count":1,"favorited":false,"retweeted":false,"possibly_sensitive":false,"possibly_sensitive_appealable":false,"lang":"in"},{"created_at":"Mon Oct 31 10:43:42 +0000 2016","id":793040747620544500,"id_str":"793040747620544513","text":"17.43: RT @kresna166: Lalin Tol Jagorawi arah ke Cibubur padat sekali. #Cuaca gerimis. https://t.co/fg6jT0MMBg","truncated":false,"entities":{"hashtags":[{"text":"Cuaca","indices":[71,77]}],"symbols":[],"user_mentions":[{"screen_name":"kresna166","name":"sandhi","id":1359402254,"id_str":"1359402254","indices":[10,20]}],"urls":[],"media":[{"id":793040713554366500,"id_str":"793040713554366464","indices":[87,110],"media_url":"http://pbs.twimg.com/media/CwFyU8fUkAAl-QW.jpg","media_url_https":"https://pbs.twimg.com/media/CwFyU8fUkAAl-QW.jpg","url":"https://t.co/fg6jT0MMBg","display_url":"pic.twitter.com/fg6jT0MMBg","expanded_url":"https://twitter.com/RadioElshinta/status/793040747620544513/photo/1","type":"photo","sizes":{"small":{"w":510,"h":680,"resize":"fit"},"medium":{"w":720,"h":960,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"large":{"w":720,"h":960,"resize":"fit"}}}]},"extended_entities":{"media":[{"id":793040713554366500,"id_str":"793040713554366464","indices":[87,110],"media_url":"http://pbs.twimg.com/media/CwFyU8fUkAAl-QW.jpg","media_url_https":"https://pbs.twimg.com/media/CwFyU8fUkAAl-QW.jpg","url":"https://t.co/fg6jT0MMBg","display_url":"pic.twitter.com/fg6jT0MMBg","expanded_url":"https://twitter.com/RadioElshinta/status/793040747620544513/photo/1","type":"photo","sizes":{"small":{"w":510,"h":680,"resize":"fit"},"medium":{"w":720,"h":960,"resize":"fit"},"thumb":{"w":150,"h":150,"resize":"crop"},"large":{"w":720,"h":960,"resize":"fit"}}}]},"source":"<a href=\"https://about.twitter.com/products/tweetdeck\" rel=\"nofollow\">TweetDeck</a>","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":121640063,"id_str":"121640063","name":"Radio Elshinta","screen_name":"RadioElshinta","location":"ÜT: -6.187385,106.733011","description":"Official twitter of Radio Elshinta  |  Phone: 021-5869000  |  SMS: 081-180-6543  |  Email: redaksi@elshinta.com  |  Wanna buzz? Email us: buzz@elshinta.com","url":"http://t.co/in2mL8c87g","entities":{"url":{"urls":[{"url":"http://t.co/in2mL8c87g","expanded_url":"http://www.elshinta.com","display_url":"elshinta.com","indices":[0,22]}]},"description":{"urls":[]}},"protected":false,"followers_count":2242598,"friends_count":3,"listed_count":3700,"created_at":"Wed Mar 10 03:52:46 +0000 2010","favourites_count":365,"utc_offset":25200,"time_zone":"Jakarta","geo_enabled":false,"verified":true,"statuses_count":703417,"lang":"en","contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"0099B9","profile_background_image_url":"http://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_image_url_https":"https://pbs.twimg.com/profile_background_images/791664657/d96264b0458637d8e06d39568264b2fe.jpeg","profile_background_tile":false,"profile_image_url":"http://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_image_url_https":"https://pbs.twimg.com/profile_images/709975918387851264/a7-9m7-k_normal.jpg","profile_banner_url":"https://pbs.twimg.com/profile_banners/121640063/1477623055","profile_link_color":"46D0EB","profile_sidebar_border_color":"FFFFFF","profile_sidebar_fill_color":"2D86D4","profile_text_color":"0C0417","profile_use_background_image":false,"has_extended_profile":false,"default_profile":false,"default_profile_image":false,"following":true,"follow_request_sent":false,"notifications":false,"translator_type":"none"},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":0,"favorite_count":1,"favorited":false,"retweeted":false,"possibly_sensitive":false,"possibly_sensitive_appealable":false,"lang":"in"}])
    },

    getSearchAPI: function (req, res) {
        var url = 'https://api.twitter.com/1.1/search/tweets.json?q=' + req.query.q
        test(url, function (data) {
            res.json(JSON.parse(data))
        })
    },


    getTimelineAPI: function (req, res) {
        var url = 'https://api.twitter.com/1.1/statuses/user_timeline.json'
        test(url, function (data) {
            res.json(JSON.parse(data))
        })
    },

    createStatusAPI: function (req, res) {
        // console.log(req.body)
        T.post('statuses/update', { status: req.body.status }, function(err, data, response) {
            res.json(data)
        })
        // res.json("status di tambah")
    }

}
